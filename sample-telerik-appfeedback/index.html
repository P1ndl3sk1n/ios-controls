<!DOCTYPE html>
<html>
	<head>
		<title>Feedback Sample Apps</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-title" content="LOLcat">

		<link href="kendo/styles/kendo.mobile.all.min.css" rel="stylesheet" />
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="touch-icons/apple-touch-icon-114x114.png">
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href="touch-icons/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon-precomposed" sizes="57x57" href="touch-icons/apple-touch-icon-57x57.png">
		<link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet" type="text/css">
		<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,300,700,800" rel="stylesheet" type="text/css">
		<link href="styles/main.css" rel="stylesheet" type="text/css">

		<script src="cordova.js"></script>
		<script src="kendo/js/jquery.min.js"></script>
		<script src="kendo/js/kendo.mobile.min.js"></script>
		<script src="scripts/jQuery.ios-shake.js"></script>
		<script src="scripts/sketch.js"></script>
		<script src="scripts/moment.min.js"></script>
		<script src="scripts/detailsViewModel.js"></script>
		<script src="scripts/allFeedbackViewModel.js"></script>
		<script src="scripts/viewModel.js"></script>
		<script src="scripts/app.js"></script>
	</head>
	<body>
		<div id="Notification"><i class="icon-remove"></i><span></span></div>
		<div id="Overlay" style="display: none;"></div>
		<div id="Loading" style="display: none;"></div>
		<div id="home-view" data-role="view" data-title="LOL Cats" data-model="app.viewModel">
			<div id="Content">
				<div class="content-body">
					<div id="images" style="padding: 0 20px;"></div>
				</div>
			</div>
		</div>

		<div id="Navigation" data-role="drawer" data-views="['home-view',  'all-feedback-view']">
			<ul class="top">
				<li>
					<a href="#home-view">
						<i class="icon-home"></i> Home
					</a>
				</li>
				<li>
					<a href="#all-feedback-view">
						<i class="icon-list"></i> All Feedback
					</a>
				</li>
			</ul>
		</div>

		<div id="send-feedback-view" 
			 data-role="view" 
			 data-layout="send-feedback-layout" 
			 data-model="app.viewModel"
			 data-title="Send Feedback"
             data-show="app.viewModel.onSendFeedbackViewShown">
			<div class="send-feedback-form">
                <h1>Tap to leave feedback</h1>
				<div class="image-editor">
					<p>
						Screenshot (<span data-bind="text: imageSize"></span>):
					</p>

                    <canvas id="screenshotCanvas" data-role="touch" data-tap="app.viewModel.onScreenshotTap"></canvas>
				</div>
			</div>
		</div>

		<div id="all-feedback-view" 
			 data-show="app.allFeedbackViewModel.allFeedbackViewShown" 
			 data-role="view" 
			 data-title="All feedback" 
			 data-model="app.allFeedbackViewModel" 
			 data-layout="main-layout">
			<ul id="allFeedbackListView">

			</ul>
		</div>

		<div id="feedback-details-view" 
			 data-role="view" 
			 data-layout="feedback-details-layout" 
			 data-title="Feedback"
			 data-show="app.viewModel.details.detailsViewShown"
			 data-model="app.viewModel.details">
			<div class="feedback-screenshot" data-bind="visible: details.imageUrl">
				<div class="screenshot-wrapper">
					<img data-bind="{attr: {src: details.imageUrl}}">
					<div class="zoom-button in">
						<i class="icon-zoom-in"></i>
					</div>
					<div class="zoom-button out">
						<i class="icon-zoom-out"></i>
					</div>
				</div>
			</div>
			<div class="feedback-description">
				<p class="author" data-bind="text: author"></p>
				<p class="text" data-bind="text: currentThread.Text"></p>
				<p class="date" data-bind="text: createdAt"></p>
			</div>
			<div class="replies-listing">
				<h2>Comments</h2>
				<ul id="feedbackCommentsListView" data-role="listView" data-bind="source: feedbackComments" data-template="feedback-details-template">
				</ul>
			</div>
			<div class="send-feedback-form">
				<textarea placeholder="Your reply" data-bind="value: feedbackText"></textarea>
				<input type="text" placeholder="Your name" data-bind="value: UID">

				<a data-role="button" data-bind="click: postReply">
					Add Reply
				</a>
			</div>
		</div>

        <div id="modal-view" data-role="modalview" data-model="app.viewModel" style="width: 300px; height: 300px">
            <div class="send-feedback-form">
				<textarea id="feedback-textarea" rows="12" data-bind="value: feedbackText" placeholder="Tell us what you think"></textarea>
                <div style="maring-top: 10px;">
                    <a data-click="app.viewModel.saveFeedback" data-role="button">Save</a>
                    <a data-role="button" data-align="right" data-click="app.viewModel.cancelFeedback">Cancel</a>
            	</div>
            </div>
        </div>
        
		<div id="send-all-view" data-role="modalview" data-model="app.viewModel" style="width: 300px; height: 100px">
            <div class="send-feedback-form">
				<div class="user-name">
					<input id="FeedbackFrom" type="text" placeholder="Your name" data-bind="value: UID">
				</div>
                <div style="margin-top: 10px;">
                    <a data-role="button" data-click="app.viewModel.doneSendFeedbackItems">Done</a>
                	<a data-role="button" data-click="app.viewModel.cancelSendFeedbackItems">Cancel</a>                	
                </div>
            </div>
        </div>
        
		<!--Layout-->
		<div data-role="layout" data-id="main-layout">
			<div data-role="header">
				<header class="bar-title" data-role="navbar">
					<a class="button navigation-toggle" href="#Navigation" data-role="button" data-rel="drawer" data-align="left">
						<i class="icon-reorder"></i>
					</a>
					<span data-role="view-title"></span>
					<a class="send-button"
					   data-align="right" 
					   data-role="button"
					   data-click="app.viewModel.goToSendFeedbackView">
						<i class="icon-bullhorn"></i>
					</a>
				</header>
			</div>
		</div>

		<div data-role="layout" data-id="send-feedback-layout">
			<div data-role="header">
				<div data-role="navbar">
					<a data-role="backbutton" data-align="left" data-click="app.viewModel.navigateToRoot">Cancel</a>
					<span data-role="view-title"></span>
                    <a class="send-button" data-align="right" data-role="button" data-click="app.viewModel.sendFeedbackItems">Send</a>
				</div>
			</div>
		</div>

		<div data-role="layout" data-id="feedback-details-layout">
			<div data-role="header">
				<div data-role="navbar">
					<a data-role="backbutton" data-align="left"></a>
					<span data-role="view-title"></span>
				</div>
			</div>
		</div>

		<div data-role="layout" data-id="edit-screenshot-layout">
			<div data-role="header">
				<div data-role="navbar">
					<a data-role="backbutton" data-align="left">Cancel</a>
					<span data-role="view-title"></span>
					<a data-role="button" data-align="right" data-click="app.viewModel.editScreenshot">Done</a>
				</div>
			</div>
		</div>

		<script type="text/x-kendo-template" id="all-feedback-template">
			<a>
				<div class="feedback-item">
					<div class="date"># var createdAt = kendo.toString(new Date(data.CreatedAt), 'MMMM dd, yyyy h:mm tt'); #
						${createdAt} </div>
					<div class="author">${data.Author || data.Uid || 'Anonymous'}</div>
					<div class="text">${Text || ''}</div>
					<div class="replies">${CommentsCount -1} replies</div>
				</div>
			</a>
		</script>

		<script type="text/x-kendo-template" id="feedback-details-template">
			<li>
				<div class="text">${data.Text || ''}</div>
				# var createdAt = kendo.toString(new Date(data.CreatedAt), 'MMMM dd, yyyy h:mm tt'); #
				<div class="meta">
					<span class="date">#= moment(data.ModifiedAt).fromNow() #</span>
					<span class="author">${data.Author || data.Uid || 'Anonymous'} </span>
				</div>
			</li>
		</script>
	</body>
</html>
